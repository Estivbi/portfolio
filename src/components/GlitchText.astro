---
export interface Props {
	text: string;
}

const { text } = Astro.props;
---

<div class="glitch-wrapper">
	<div class="glitch" data-text={text}>{text}</div>
</div>

<style>
	.glitch-wrapper {
		position: relative;
		display: inline-block;
	}

	.glitch {
		position: relative;
		font-weight: bold;
		background: linear-gradient(to bottom, #ffffff 50%, #cccccc 100%);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.glitch::before,
	.glitch::after {
		content: attr(data-text);
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
    background: linear-gradient(to bottom, #ffffff 50%, #cccccc 100%);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.glitch::before {
		left: 2px;
		text-shadow: -2px 0 #535852;
		clip: rect(24px, 550px, 90px, 0);
		animation: glitch-anim-1 2s infinite linear alternate-reverse;
	}

	.glitch::after {
		left: -2px;
		text-shadow: -2px 0 #89f37d;
		clip: rect(85px, 550px, 140px, 0);
		animation: glitch-anim-2 2s infinite linear alternate-reverse;
	}

	@keyframes glitch-anim-1 {
		0% {
			clip: rect(141px, 550px, 44px, 0);
		}
		20% {
			clip: rect(61px, 550px, 129px, 0);
		}
		40% {
			clip: rect(17px, 550px, 4px, 0);
		}
		60% {
			clip: rect(86px, 550px, 128px, 0);
		}
		80% {
			clip: rect(141px, 550px, 22px, 0);
		}
		100% {
			clip: rect(21px, 550px, 46px, 0);
		}
	}

	@keyframes glitch-anim-2 {
		0% {
			clip: rect(87px, 550px, 4px, 0);
		}
		20% {
			clip: rect(19px, 550px, 92px, 0);
		}
		40% {
			clip: rect(15px, 550px, 114px, 0);
		}
		60% {
			clip: rect(100px, 550px, 115px, 0);
		}
		80% {
			clip: rect(121px, 550px, 22px, 0);
		}
		100% {
			clip: rect(35px, 550px, 147px, 0);
		}
	}
</style>